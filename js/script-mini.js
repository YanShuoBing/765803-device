for(var mapPreview,mapFull,mapPreviewMarker,mapFullMarker,popularControls=document.querySelectorAll(".controls__button"),popularCurrent=document.querySelector(".controls__button--current"),popularSlides=document.querySelectorAll(".slider__item"),popularShow=document.querySelector(".slider__item--show"),featuresItem=document.querySelectorAll(".features__item"),featuresItemCurrent=document.querySelector(".features__item--current"),featuresControls=document.querySelectorAll(".features__button"),featuresCurrent=document.querySelector(".features__button--current"),featuresSlides=document.querySelectorAll(".features__slide"),featuresShow=document.querySelector(".features__slide--show"),overlay=document.querySelector(".overlay"),map=document.querySelector(".location"),mapOpen=document.querySelector(".contacts__link"),mapClose=map.querySelector(".popup__close"),feedback=document.querySelector(".write-us"),feedbackOpen=document.querySelector(".contacts__button"),feedbackForm=feedback.querySelector(".write-us__form"),feedbackFullName=feedback.querySelector(".write-us__full-name"),feedbackEmail=feedback.querySelector(".write-us__email"),feedbackMessage=feedback.querySelector(".write-us__textarea"),feedbackClose=feedback.querySelector(".popup__close"),isStorageSupport=!0,storageFullName="",storageEmail="",i=0;i<popularControls.length;i++)popularControls[i].addEventListener("click",function(e){if(e.preventDefault(),!this.classList.contains("controls__button--current")){popularCurrent.classList.remove("controls__button--current"),(popularCurrent=this).classList.add("controls__button--current");for(var t=0;t<popularSlides.length;t++)popularControls[t].classList.contains("controls__button--current")&&(popularShow.classList.remove("slider__item--show"),popularSlides[t].classList.add("slider__item--show"),popularShow=popularSlides[t])}});for(i=0;i<featuresControls.length;i++)featuresControls[i].addEventListener("click",function(e){if(e.preventDefault(),!this.classList.contains("features__button--current")){featuresCurrent.classList.remove("features__button--current"),(featuresCurrent=this).classList.add("features__button--current");for(var t=0;t<featuresSlides.length;t++)featuresControls[t].classList.contains("features__button--current")&&(featuresShow.classList.remove("features__slide--show"),featuresSlides[t].classList.add("features__slide--show"),featuresShow=featuresSlides[t])}});try{storageFullName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}function initMap(){mapPreview=new google.maps.Map(document.querySelector(".contacts__link"),{center:{lat:55.687031,lng:37.52961800000003},zoom:17,disableDefaultUI:!0}),mapPreviewMarker=new google.maps.Marker({position:{lat:55.687031,lng:37.52961800000003},map:mapPreview}),mapFull=new google.maps.Map(document.querySelector(".location__map"),{center:{lat:55.687031,lng:37.52961800000003},zoom:17}),mapFullMarker=new google.maps.Marker({position:{lat:55.687031,lng:37.52961800000003},map:mapFull})}mapOpen.addEventListener("click",function(e){e.preventDefault(),overlay.classList.add("overlay--show"),map.classList.add("popup--show"),initMap()}),mapClose.addEventListener("click",function(e){e.preventDefault(),overlay.classList.remove("overlay--show"),map.classList.remove("popup--show"),map.classList.remove("popup--error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&map.classList.contains("popup--show")&&(e.preventDefault(),overlay.classList.remove("overlay--show"),map.classList.remove("popup--show"),map.classList.remove("popup--error"))}),feedbackOpen.addEventListener("click",function(e){e.preventDefault(),overlay.classList.add("overlay--show"),feedback.classList.add("popup--show"),feedbackFullName.focus(),storageFullName&&(feedbackFullName.value=storageFullName,storageEmail?(feedbackEmail.value=storageEmail,feedbackMessage.focus()):feedbackEmail.focus())}),feedbackForm.addEventListener("submit",function(e){feedbackFullName.value&&feedbackEmail.value&&feedbackMessage.value?isStorageSupport&&(localStorage.setItem("name",feedbackFullName.value),localStorage.setItem("email",feedbackEmail.value)):(e.preventDefault(),feedback.classList.remove("popup--error"),feedback.offsetWidth=feedback.offsetWidth,feedback.classList.add("popup--error"))}),feedbackClose.addEventListener("click",function(e){e.preventDefault(),overlay.classList.remove("overlay--show"),feedback.classList.remove("popup--show"),feedback.classList.remove("popup--error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&feedback.classList.contains("popup--show")&&(e.preventDefault(),overlay.classList.remove("overlay--show"),feedback.classList.remove("popup--show"),feedback.classList.remove("popup-error"))}),overlay.addEventListener("click",function(e){overlay.classList.remove("overlay--show"),map.classList.remove("popup--show"),mar.classList.remove("popup--error"),feedback.classList.remove("popup--show"),feedback.classList.remove("popup--error")});